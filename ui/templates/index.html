{% extends 'base.html' %}

{% block content %}

<h1 class="font-title text-3xl text-neutral-950 mb-6 text-center">Newsfeed Generator</h1>
<div id="error-message"
    class="mt-5 flex items-center justify-between p-5 leading-normal text-red-600 bg-red-100 rounded-lg" role="alert">
    <p>Error alert</p>

    <svg onclick="return this.parentNode.remove();"
        class="inline w-4 h-4 fill-current ml-2 hover:opacity-80 cursor-pointer" xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 512 512">
        <path
            d="M256 0C114.6 0 0 114.6 0 256s114.6 256 256 256s256-114.6 256-256S397.4 0 256 0zM256 464c-114.7 0-208-93.31-208-208S141.3 48 256 48s208 93.31 208 208S370.7 464 256 464zM359.5 133.7c-10.11-8.578-25.28-7.297-33.83 2.828L256 218.8L186.3 136.5C177.8 126.4 162.6 125.1 152.5 133.7C142.4 142.2 141.1 157.4 149.7 167.5L224.6 256l-74.88 88.5c-8.562 10.11-7.297 25.27 2.828 33.83C157 382.1 162.5 384 167.1 384c6.812 0 13.59-2.891 18.34-8.5L256 293.2l69.67 82.34C330.4 381.1 337.2 384 344 384c5.469 0 10.98-1.859 15.48-5.672c10.12-8.562 11.39-23.72 2.828-33.83L287.4 256l74.88-88.5C370.9 157.4 369.6 142.2 359.5 133.7z" />
    </svg>
</div>
<form id="news-input-form" class="flex items-center gap-4 mb-8 justify-center" action="{{ url_for('get_newsfeed') }}"
    method="POST">
    <input id="topicDate" name="topicDate" type="date"
        class="w-[200px] p-2 border border-neutral-300 rounded-full focus:outline-none focus:ring-2 focus:ring-primary-500" />
    <input id="topicString" name="topicString" type="text" placeholder="Newsfeed Topics"
        class="w-[300px] p-2 border border-neutral-300 rounded-full focus:outline-none focus:ring-2 focus:ring-primary-500" />
    <button type="submit" class="bg-primary-500 text-white px-6 py-2 rounded-full hover:bg-primary-600 transition-all">
        Submit
    </button>
    <button type="reset" class="bg-slate-400 text-black px-6 py-2 rounded-full hover:bg-neutral-600 transition-all">
        Clear
    </button>
    <input type="hidden" id="search_id" value="{{ search_id }}">
</form>

<div class="divider divider-info"></div>

{% if topic is defined %}
<div class="text-black">
    Results for articles on {{ topic.topicString }} before {{ topic.topicDate }}
</div>
{% endif %}

{% if articles is defined %}
<table class="w-full table-fixed border border-neutral-200 rounded-lg overflow-hidden shadow-md">
    <thead>
        <tr class="bg-primary-500 text-primary-50">
            <th class="p-4 text-left">Thumbnail</th>
            <th class="p-4 text-left">Title</th>
            <th class="p-4 text-left">Date Published</th>
            <th class="p-4 text-left">Source</th>
        </tr>
    </thead>
    <tbody>
        {% for article in articles %}
        <tr class="bg-white hover:bg-primary-50 text-black transition-all">
            <td class="p-4" width="25px"><img src="{{ article.thumbnail }}" /></td>
            <td class="p-4" width="100px"><a href="{{ article.link }}"> {{ article.title }} </a></td>
            <td class="p-4" width="25px">{{ article.date }}</td>
            <td class="p-4" width="40px">{{ article.source }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endif %}


{% endblock %}